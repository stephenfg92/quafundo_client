{"ast":null,"code":"import _regeneratorRuntime from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Te/dev/quafundo_client/react-api/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";require('dotenv').config();var Quiz=/*#__PURE__*/function(_React$Component){_inherits(Quiz,_React$Component);var _super=_createSuper(Quiz);function Quiz(props){var _this;_classCallCheck(this,Quiz);_this=_super.call(this,props);_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _Object$keys$length;var answerCount;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_this.resultCount=0;answerCount=(_Object$keys$length=Object.keys(_this.data).length)!==null&&_Object$keys$length!==void 0?_Object$keys$length:0;if(!(answerCount!==_this.questionCount)){_context2.next=8;break;}_this.shouldWarn=true;_this.setState({waiting:true});_context2.next=11;break;case 8:_this.shouldWarn=false;_context2.next=11;return fetch(process.env.REACT_APP_API_URL+'responder',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_this.data)}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=_this;_context.next=3;return response.json();case 3:_context.t1=_context.sent;_context.t2={results:_context.t1,waiting:false};_context.t0.setState.call(_context.t0,_context.t2);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log(error);});case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var key=e.target.name.toString();var value=e.target.value.toString();_this.data[key]=value;};_this.state={results:[]};_this.data={};_this.questionCount=0;_this.resultCount=0;_this.shouldCount=false;_this.shouldWarn=false;return _this;}_createClass(Quiz,[{key:\"renderDescription\",value:function renderDescription(){var description=this.props.quiz.description;if(typeof description==='undefined'){return/*#__PURE__*/_jsx(\"div\",{children:\"carregando...\"});}return/*#__PURE__*/_jsx(\"h1\",{children:description});}},{key:\"renderQuestions\",value:function renderQuestions(){var _this2=this;var questions=this.props.quiz.perguntas;if(typeof questions==='undefined'){return/*#__PURE__*/_jsx(\"div\",{children:\"carregando...\"});}if(this.questionCount===0){this.questionCount=questions.length;}return/*#__PURE__*/_jsx(\"div\",{children:questions.map(function(question,index){return/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",question.description,\" \",_this2.renderAlternatives(question._id,question.alternatives),\" \"]},index);})});}},{key:\"renderAlternatives\",value:function renderAlternatives(questionId,alternatives){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{children:alternatives.map(function(alternative,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:questionId,value:alternative._id,onChange:_this3.handleChange}),\" \",alternative.text,\" \",_this3.renderResult(alternative._id)]})},index);})});}},{key:\"renderResult\",value:function renderResult(alternativeId){var result=this.state.results[alternativeId];if(result!==undefined){this.shouldCount=true;}if(result===true){this.resultCount+=1;return\"Acertou!\";}if(result===false){return\"Errou!\";}}},{key:\"renderCount\",value:function renderCount(){if(this.shouldWarn){return/*#__PURE__*/_jsx(\"p\",{children:\" Voc\\xEA ainda n\\xE3o respondeu todas as perguntas! Revise suas respostas.\"});}if(this.shouldCount){return/*#__PURE__*/_jsxs(\"p\",{children:[\" Voc\\xEA acertou \",this.resultCount,\" de \",this.questionCount,\" quest\\xF5es \"]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"form\",{onSubmit:this.onSubmit,children:/*#__PURE__*/_jsxs(\"div\",{children:[this.renderDescription(),this.renderQuestions(),/*#__PURE__*/_jsx(\"button\",{children:\"Enviar\"}),this.renderCount()]})});}}]);return Quiz;}(React.Component);export default Quiz;","map":{"version":3,"sources":["D:/Te/dev/quafundo_client/react-api/src/components/quiz.js"],"names":["React","require","config","Quiz","props","onSubmit","e","preventDefault","resultCount","answerCount","Object","keys","data","length","questionCount","shouldWarn","setState","waiting","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","then","response","json","results","catch","error","console","log","handleChange","key","target","name","toString","value","state","shouldCount","description","quiz","questions","perguntas","map","question","index","renderAlternatives","_id","alternatives","questionId","alternative","text","renderResult","alternativeId","result","undefined","renderDescription","renderQuestions","renderCount","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nrequire('dotenv').config()\r\n\r\nclass Quiz extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {results: []}\r\n        this.data = {}\r\n        this.questionCount = 0\r\n        this.resultCount = 0\r\n        this.shouldCount = false\r\n        this.shouldWarn = false\r\n    }\r\n\r\n    onSubmit = async e => {\r\n        e.preventDefault();\r\n        this.resultCount = 0;\r\n\r\n        const answerCount = Object.keys(this.data).length ?? 0;\r\n\r\n        if (answerCount !== this.questionCount) {\r\n            this.shouldWarn = true;\r\n            this.setState({waiting: true})\r\n        }\r\n        else{\r\n            this.shouldWarn = false;\r\n\r\n            await fetch(process.env.REACT_APP_API_URL + 'responder', {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify(this.data),\r\n            })\r\n            .then(async response => { this.setState({results: await response.json(), waiting: false}) })\r\n            .catch( error => {console.log(error)})\r\n        }\r\n\r\n    }\r\n\r\n    handleChange = e => {\r\n        const key = e.target.name.toString()\r\n        const value = e.target.value.toString()\r\n        this.data[key] = value\r\n    }\r\n\r\n    renderDescription() {\r\n        const description = this.props.quiz.description\r\n        \r\n        if (typeof(description) === 'undefined') {return (<div>carregando...</div>)}\r\n\r\n        return(\r\n            <h1>{description}</h1>\r\n        )\r\n    }\r\n\r\n    renderQuestions() {\r\n        const questions = this.props.quiz.perguntas\r\n\r\n        if (typeof(questions) === 'undefined') {return (<div>carregando...</div>)}\r\n\r\n        if (this.questionCount === 0) {this.questionCount = questions.length}\r\n\r\n        return (\r\n            <div>\r\n            {   questions.map( (question, index) => (\r\n                    <h3 key={index}> {question.description} {this.renderAlternatives(question._id, question.alternatives)} </h3> \r\n                )) \r\n            } \r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderAlternatives(questionId,alternatives) {\r\n        return(\r\n            <div>\r\n                {\r\n                    alternatives.map( (alternative, index) => (\r\n                        <div key={index}>\r\n                            <h5> <input type=\"radio\" name={questionId} value={alternative._id}  onChange={this.handleChange}></input> {alternative.text} {this.renderResult(alternative._id)}</h5>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderResult(alternativeId) {\r\n\r\n        const result = this.state.results[alternativeId]\r\n        if (result !== undefined) {this.shouldCount = true}\r\n        \r\n        if (result === true) {\r\n            this.resultCount += 1;\r\n            return \"Acertou!\"\r\n        }\r\n        if (result === false) {\r\n            return \"Errou!\"\r\n        }\r\n\r\n    }\r\n\r\n    renderCount() {\r\n\r\n        if (this.shouldWarn) { \r\n            return (<p> Você ainda não respondeu todas as perguntas! Revise suas respostas.</p>)\r\n        }\r\n\r\n        if (this.shouldCount) {\r\n            return (<p> Você acertou {this.resultCount} de {this.questionCount} questões </p>)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <form onSubmit={this.onSubmit}>\r\n                <div>\r\n                    {this.renderDescription()}\r\n                    {this.renderQuestions()}\r\n                    <button>Enviar</button>\r\n                    {this.renderCount()}\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Quiz"]},"metadata":{},"sourceType":"module"}